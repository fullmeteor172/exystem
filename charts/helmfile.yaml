################################################################################
# Helmfile - Kubernetes Workload Orchestration
#
# Usage:
#   helmfile -e dev sync              # Deploy to development
#   helmfile -e staging sync          # Deploy to staging
#   helmfile -e prod sync             # Deploy to production
#   helmfile -e dev diff              # Preview changes
#   helmfile -e dev destroy           # Remove all releases
#   helmfile -e dev -l layer=core sync        # Deploy only core layer
#   helmfile -e dev -l component=traefik sync # Deploy only traefik
################################################################################

# Helm repositories
repositories:
  - name: traefik
    url: https://traefik.github.io/charts
  - name: jetstack
    url: https://charts.jetstack.io
  - name: prometheus-community
    url: https://prometheus-community.github.io/helm-charts
  - name: grafana
    url: https://grafana.github.io/helm-charts
  - name: kubernetes-sigs
    url: https://kubernetes-sigs.github.io/external-dns
  - name: argo
    url: https://argoproj.github.io/argo-helm

# Environment configuration
environments:
  dev:
    values:
      - environments/common/values.yaml
      - environments/dev/values.yaml
    secrets:
      - environments/dev/secrets.yaml
  staging:
    values:
      - environments/common/values.yaml
      - environments/staging/values.yaml
    secrets:
      - environments/staging/secrets.yaml
  prod:
    values:
      - environments/common/values.yaml
      - environments/prod/values.yaml
    secrets:
      - environments/prod/secrets.yaml

# Layered helmfile configurations
helmfiles:
  - path: helmfile.d/00-core.yaml
  - path: helmfile.d/10-networking.yaml
  - path: helmfile.d/20-security.yaml
  - path: helmfile.d/30-observability.yaml
  - path: helmfile.d/40-gitops.yaml
  - path: helmfile.d/50-apps.yaml
