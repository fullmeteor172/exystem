################################################################################
# General Configuration
################################################################################

project_name = "exystem"
environment  = "dev"
aws_region   = "us-west-2"

tags = {
  Owner = "meteor"
  Team  = "platform"
}

################################################################################
# Networking Configuration
################################################################################

vpc_cidr = "10.0.0.0/16"

# Leave empty to use all AZs in the region
availability_zones = ["us-west-2a", "us-west-2b", "us-west-2c"]

# Set to true for production, false for dev to save costs
enable_nat_gateway = true
single_nat_gateway = true  # Set to false for HA in production

################################################################################
# EKS Cluster Configuration
################################################################################

cluster_version = "1.34"

# For production, restrict public access
cluster_endpoint_public_access  = true
cluster_endpoint_private_access = true

enable_cluster_creator_admin_permissions = true

################################################################################
# Karpenter Configuration
################################################################################

karpenter_namespace = "karpenter"

karpenter_node_instance_types = [
  "t3.medium",
  "t3.large",
  "t3.xlarge",
  "t3.2xlarge",
  "t3a.medium",
  "t3a.large",
  "t3a.xlarge",
  "t3a.2xlarge"
]

karpenter_node_capacity_type = ["spot", "on-demand"]

################################################################################
# Addons Configuration
################################################################################

traefik_namespace      = "traefik"
cert_manager_namespace = "cert-manager"

# Cloudflare configuration for automatic SSL certificates
# Get your API token from: https://dash.cloudflare.com/profile/api-tokens
# Get your Zone ID from your domain's Overview page in Cloudflare dashboard
cloudflare_api_token = "your-cloudflare-api-token-here"
cloudflare_zone_id   = "your-cloudflare-zone-id-here"
cloudflare_email     = "your-email@example.com"

# Email for Let's Encrypt certificate notifications
acme_email = "admin@example.com"

# Use staging for testing, production for real certificates
# acme_server = "https://acme-staging-v02.api.letsencrypt.org/directory"  # Staging
acme_server = "https://acme-v02.api.letsencrypt.org/directory"  # Production

# Your primary domain (managed in Cloudflare)
domain_name = "example.com"

################################################################################
# Observability Configuration
################################################################################

# Set to true to deploy Prometheus, Loki, and Grafana
enable_observability = false

observability_namespace = "observability"

# Leave empty to auto-generate a secure password
grafana_admin_password = ""

# Log retention in Loki (days)
loki_retention_days = 30

# Metrics retention in Prometheus (days)
prometheus_retention_days = 15

# Prometheus storage size
prometheus_storage_size = "50Gi"

################################################################################
# RDS Configuration
################################################################################

# Set to true to create a PostgreSQL database
enable_rds = false

rds_engine_version   = "17.2"
rds_instance_class   = "db.t4g.micro"   # Use larger instances for production
rds_allocated_storage = 20

rds_database_name   = "app"
rds_master_username = "postgres"

rds_backup_retention_period = 7
rds_multi_az                = false  # Set to true for production HA

################################################################################
# ElastiCache Configuration
################################################################################

# Set to true to create a Redis cluster
enable_elasticache = false

elasticache_node_type             = "cache.t4g.micro"  # Use larger nodes for production
elasticache_num_cache_nodes       = 1
elasticache_engine_version        = "7.1"
elasticache_parameter_group_family = "redis7"

# Requires at least 2 nodes
elasticache_automatic_failover = false

################################################################################
# EFS Configuration
################################################################################

# Set to true to create an EFS file system
enable_efs = false

efs_performance_mode = "generalPurpose"  # or "maxIO" for high IOPS
efs_throughput_mode  = "bursting"        # or "provisioned" for consistent throughput

# Only used if throughput_mode is "provisioned"
# efs_provisioned_throughput_in_mibps = 100
